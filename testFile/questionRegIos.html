
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>DOCTALK</title>

    <link rel="stylesheet" type="text/css" href="http://52.79.145.39/hugmom/assets/dfs/css/common.css">



   <script type="text/javascript" src="http://52.79.145.39/hugmom/assets/third-party/jquery/jquery-1.12.2.min.js"></script>
	<script type="text/javascript" src="http://52.79.145.39/hugmom/assets/dfs/js/common.js" charset="euc-kr"></script>
	<script type="text/javascript" src="http://52.79.145.39/hugmom/assets/dfs/js/dfs.js"></script>
	<script type="text/javascript" src="http://52.79.145.39/hugmom/assets/dfs/js/dt_lib.js?v=1612231701b"></script>
	<script type="text/javascript" src="http://52.79.145.39/hugmom/assets/dfs/js/dt_layout.js?v=1612281756b"></script>

	<script type="text/javascript">
		function showErrorPage(){$('#container').html('페이지를 찾을 수 없습니다');}

		if('DTLayout' in window){
			DTLayout.contextPath='/hugmom';

			DTLayout.params=(function(){
				var paramMap={};
				var params=location.search.replace(/\?/ig,'').split('&');
				if(params&&params.length>0){
					for(var idx in params){
						var s=params[idx].split('=');
						if(s.length>1){
							paramMap[s[0]]=s[1];
						}else{
							paramMap[s[0]]=s[0];
						}
					}
				}
				return paramMap;
			})();
		}

		if('DynamicImage' in window){
			DynamicImage.imgDNS='/hugmom';//'http://52.79.145.39/hugmom/hugmom';
		}

		if(!window.FileReader||!window.FormData||!window.Image){
			alert('최신 브라우저를 설치해주세요. 해당 브라우저로는 정상적인 이용이 불가능합니다.');
		}

	</script>

<script type="text/javascript">
$(document).ready(function(){


});

$(window).load(function(){
	getAnswerWindow().summernote({
		placeholder:'',
		h:$('#textarea_answer').height()-40
	});

});
var category = "";
$(function(){

	$('.btnCategory').click(function(){
		$('.subCategory').show();
	});

	// $('#qustionImage').click(function(){
	// 	webkit.messageHandlers.callbackHandler.postMessage('upload');
	// });

	/*답변 이미지 업로드*/
	$('#qustionImage').on('change',function(){

		//console.log(1);
		var _this = this;
		if(!$(this).val()){
			alert('파일을 선택해주세요.');
			return;
		}
		if(!FileExpVerifier.isValid("image", $(this).val())){
			return;
		}

		var data = new FormData();
		data.append('image',this.files[0]);
		alert(data);

	});


});

function getImagePath(path){

    insertImage(path);
}

function categorySelect(name, code) {
	$('.btnCategory').children().text(name);
	$('.subCategory').hide();

	category = code;
}

function getAnswerWindow(){

	return document.getElementById('textarea_answer').contentWindow;
}



function regQuestion(){

	if(getAnswerWindow().isEmpty()){
		alert('글을 작성해주세요.')
		return;
	}

	if($('.btnCategory').children().text() == '문의 카테고리 선택'){
		alert('카테고리를 선택 하세요.')
		return;
	}

	DTAlert.confirm({
		title:'문의 등록하기',
		contents:'현재까지 작성된 문의를 등록하시겠습니까? 등록 후에는 수정이 불가능합니다.',
		ok_name:'등록',
		ok:function(){

			DoctalkTool.ajax({
				url: '/hugmom/customerCenter/writeQuestion2.sub',
				data:{
					category:category,
// 					title:'문의',
					contents:getAnswerWindow().getContents(),
					authKey:DTLayout.params.authKey
				},
				success:function(header,body,userData,response,status,xhr){

					//answerPage.update(parseInt(_body.pageMap.pageNumber), parseInt(_body.pageMap.pageCount));

					DTApi.doctalk(body.api,{
						success: function(_header,_body,_response){

							//$('#requestOnesDrBox h4 .num').html(_body.pageMap.totalCount);
						}
					});

					alert('등록되었습니다.');

// 					$("#blackWrap").hide();
// 					location.reload();
// 					question();
					location.href = DTLayout.contextPath+'/notice.jsp?authKey='+DTLayout.params.authKey+"&check=question";

				},
				error:function(xhr,status,error){
					alert(status+"\n"+error);
					return false;
				},
				complete:function(){
					//btn.button('reset');

				}
			});
		}
	});
}

function regclose() {

// 	alert(DTLayout.params.authKey);
	var result = confirm('문의하기 작성을 취소 하시겠습니까?');
	if(result) { //yes location.replace('index.php');
// 	alert(DTLayout.contextPath+'/notice.jsp?authKey='+DTLayout.params.authKey+"&check=question");
		location.href = DTLayout.contextPath+'/notice.jsp?authKey='+DTLayout.params.authKey+"&check=question";
	} else {

	}

}

function toggleAnswerEditorSize(){

//	var ta=$('[data-df-selector="popup_answer"] .reBody textarea');
	var ta=$('#textarea_answer');
	console.log(ta.height());
	if(ta.height()>400){

		ta.height(112);
		getAnswerWindow().height(112);

		var btn=$('[data-df-selector="btn_answer_size"]');
		btn.attr('src',btn.attr('src').replace('icon_arrow001','icon_arrow002'));
	}
	else{

		ta.height(435);
		getAnswerWindow().height(435);

		var btn=$('[data-df-selector="btn_answer_size"]');
		btn.attr('src',btn.attr('src').replace('icon_arrow002','icon_arrow001'));
	}
}

function getAnswerWindow(){

	return document.getElementById('textarea_answer').contentWindow;
}

function insertImage(url,name){

	getAnswerWindow().insertImage(url,name);
}
</script>

</head>

<body>

<!-- contants_area start-->
<div id="container"  >
<div id="contents">

		        <div class="pop_cont" style="height: 100%; padding: 10px 10px 10px 10px ">


		            <div class="pTitle">
		                <p class="btnCategory" style="padding-right: 5px;"><a href="#">문의 카테고리 선택</a></p>
		                <div class="subCategory" style="display: none;">
		                	<ul>
                    			<li id="etc" category="BT0302"><a href="javascript:categorySelect('회원가입', 'BT0302');">회원가입</a></li>
                    			<li id="etc" category="BT0303"><a href="javascript:categorySelect('서비스문의', 'BT0303');">서비스문의</a></li>
                    			<li id="etc" category="BT0304"><a href="javascript:categorySelect('결제문의', 'BT0304');">결제문의</a></li>
		                    	<li id="etc" category="BT0301"><a href="javascript:categorySelect('기타', 'BT0301');">기타</a></li>
		                    </ul>
		                </div>
		            </div>
		            <br>
		            <div class="textarea10" style=""><iframe id="textarea_answer" src="http://52.79.145.39/hugmom/assets/dfs/contents/summernote.jsp" style="border:none; width:100%; height:350px; /*height:112px;*/" placeholder="답변 등록 후에는 수정이 불가하며, 추가 답변만 가능합니다."></iframe></div>




		            <div class="btnArea02 mt20">


		            	<input type="file" id="qustionImage" style="display: none;">
		            	<p class="btnIme"><a href="javascript:void(0);"><label for="qustionImage" style="cursor: pointer; "><img src="http://52.79.145.39/hugmom/assets/dfs/images/template/ico_add_img.png" alt="" style="padding-left: 11px;"/></label></a></p>
		                <p class="tr" style="    padding-right: 4px;">
		                    <a href="javascript:regclose();" class="btn_blue_A" style="display:inline-block; width: 100px;">취소</a>
		                	<a href="javascript:regQuestion();" class="btn_blue02" style="width: 100px;">저장</a>
		                </p>
		            </div>



		        </div>
<!-- 		    </div> -->
<!-- 		</div> -->
		<!-- //popup end ------------------------------------------------------------------------------------------>

<!--     </div> -->


</div>
<!-- contants_area start-->

</div>
</body>
</html>
